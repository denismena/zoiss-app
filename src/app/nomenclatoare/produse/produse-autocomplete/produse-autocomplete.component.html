<!-- <form class="example-form">
    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Produse</mat-label>
      <input matInput
             aria-label="Produse"
             [matAutocomplete]="auto"
             [formControl]="produsCtrl">
      <mat-autocomplete #auto="matAutocomplete" (optionSelected)="optionSelected($event)">
        <mat-option *ngFor="let produs of selectedProdus | async" [value]="produs.nume">
            <img [src]="produs.poza" />{{produs.nume}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </form> -->

  <form>
    <mat-form-field>
        <input type="text"
        placeholder="Selecteaza Produs" 
        matInput [formControl]="produsCtrl"
        [matAutocomplete]="auto"
        />
    </mat-form-field>
    <mat-autocomplete #auto
        (optionSelected)="optionSelected($event)"
    >
        <mat-option *ngFor="let produs of produsToDisplay" [value]="produs">
            <img [src]="produs.poza" /> {{produs.produsNume}}
        </mat-option>
    </mat-autocomplete>
</form>

<table #produseTable
    mat-table
    *ngIf="selectedProdus.length > 0"
    [dataSource]="selectedProdus"
    cdkDropList
    [cdkDropListData]="selectedProdus"
    (cdkDropListDropped)="dropped($event)"
>

    <ng-container matColumnDef="poza">
        <td mat-cell *matCellDef="let element">
            <img style="width: 50px" [src]="element.poza" />
        </td>
    </ng-container>

    <ng-container matColumnDef="produsNume">
        <td mat-cell *matCellDef="let element">
            {{element.produsNume}}
        </td>
    </ng-container>

    <ng-container matColumnDef="furnizorId">
        <td mat-cell *matCellDef="let element">
            <app-furnizori-autocomplete (onOptionSelected)="selectFurnizor($event)"></app-furnizori-autocomplete>            
            <div [formGroup]="furnizorFormGroup">
                <input type="hidden" formControlName="furnizorId" #furnizorId [(ngModel)]="element.furnizorId" class="clsF">
            </div>
        </td>
    </ng-container>

    <ng-container matColumnDef="um">
        <td mat-cell *matCellDef="let element">
            <mat-form-field appearance="outline" style="margin-top: 10px;">
                <mat-label>um</mat-label>
                <select matNativeControl [(ngModel)]="element.um" style="width: 30px;">
                    <option value="buc">buc</option>
                    <option value="kg">kg</option>
                    <option value="cutie">cutie</option>
                </select>
            </mat-form-field>
        </td>
    </ng-container>

    <ng-container matColumnDef="cantitate">
        <td mat-cell *matCellDef="let element">
            <mat-form-field appearance="outline" style="margin-top: 10px;">
                <mat-label>cantitate</mat-label>
                <input matInput [(ngModel)]="element.cantitate" style="width: 60px;"/>
            </mat-form-field>
        </td>
    </ng-container>

    <ng-container matColumnDef="cutii">
        <td mat-cell *matCellDef="let element">
            <mat-form-field appearance="outline" style="margin-top: 10px;">
                <mat-label>cutii</mat-label>
                <input matInput [(ngModel)]="element.cutii" style="width: 60px;"/>
            </mat-form-field>
        </td>
    </ng-container>

    <ng-container matColumnDef="pretUm">
        <td mat-cell *matCellDef="let element">
            <mat-form-field appearance="outline" style="margin-top: 10px;">
                <mat-label>pretUm</mat-label>
                <input matInput [(ngModel)]="element.pretUm" style="width: 60px;"/>
            </mat-form-field>
        </td>
    </ng-container>

    <ng-container matColumnDef="valoare">
        <td mat-cell *matCellDef="let element">
            <mat-form-field appearance="outline" style="margin-top: 10px;">
                <mat-label>valoare</mat-label>
                <input matInput [(ngModel)]="element.valoare" style="width: 60px;"/>
            </mat-form-field>
        </td>
    </ng-container>

    <ng-container matColumnDef="actions">
        <td mat-cell *matCellDef="let element">
            <mat-icon mat-list-icon (click)="remove(element)">
                close
            </mat-icon>
        </td>
    </ng-container>

    <tr mat-row *matRowDef="let row; columns: columnsToDisplay"
        cdkDrag [cdkDragData]="row"
    ></tr>

</table>
  